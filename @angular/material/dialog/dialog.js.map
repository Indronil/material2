{"version":3,"sources":["dialog/dialog.ts"],"names":[],"mappings":";;;;;;;;;OAAO,EAAC,QAAQ,EAAuB,QAAQ,EAAgB,UAAU,EAAC,MAAM,eAAe;OACxF,EACL,OAAO,EACP,aAAa,EACb,YAAY,EAEZ,YAAY,EACZ,eAAe,EACf,iBAAiB,EAClB,MAAM,SAAS;OAGT,EAAC,WAAW,EAAC,MAAM,cAAc;OACjC,EAAC,cAAc,EAAC,MAAM,mBAAmB;OACzC,EAAC,iBAAiB,EAAC,MAAM,oBAAoB;OAC7C,EAAC,UAAU,EAAC,MAAM,oBAAoB;AAE7C,SAAQ,cAAc,QAAO,iBAAiB,CAAC;AAC/C,SAAQ,WAAW,QAAO,cAAc,CAAC;AAGzC,6DAA6D;AAC7D,wCAAwC;AACxC,wCAAwC;AACxC,2CAA2C;AAC3C,qEAAqE;AACrE,6BAA6B;AAI7B;;GAEG;AAEH;IACE,kBAAoB,QAAiB,EAAU,SAAmB;QAA9C,aAAQ,GAAR,QAAQ,CAAS;QAAU,cAAS,GAAT,SAAS,CAAU;IAAI,CAAC;IAEvE;;;;OAIG;IACH,uBAAI,GAAJ,UAAQ,SAA2B,EAAE,MAAsB;QACzD,IAAI,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;QAC7C,IAAI,eAAe,GAAG,IAAI,CAAC,sBAAsB,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QAEtE,MAAM,CAAC,IAAI,CAAC,oBAAoB,CAAC,SAAS,EAAE,eAAe,EAAE,UAAU,CAAC,CAAC;IAC3E,CAAC;IAED;;;;OAIG;IACK,iCAAc,GAAtB,UAAuB,YAA4B;QACjD,IAAI,YAAY,GAAG,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC;QACvD,MAAM,CAAC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;IAC5C,CAAC;IAED;;;;;OAKG;IACK,yCAAsB,GAA9B,UAA+B,OAAmB,EAAE,MAAsB;QACxE,IAAI,eAAe,GAAG,IAAI,eAAe,CAAC,iBAAiB,EAAE,MAAM,CAAC,gBAAgB,CAAC,CAAC;QAEtF,IAAI,YAAY,GAAoC,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC;QACpF,YAAY,CAAC,QAAQ,CAAC,YAAY,GAAG,MAAM,CAAC;QAE5C,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC;IAC/B,CAAC;IAED;;;;;;OAMG;IACK,uCAAoB,GAA5B,UACI,SAA2B,EAC3B,eAAkC,EAClC,UAAsB;QACxB,qFAAqF;QACrF,0BAA0B;QAC1B,IAAI,SAAS,GAAoB,IAAI,WAAW,CAAC,UAAU,CAAC,CAAC;QAE7D,4DAA4D;QAC5D,UAAU,CAAC,aAAa,EAAE,CAAC,SAAS,CAAC,cAAM,OAAA,SAAS,CAAC,KAAK,EAAE,EAAjB,CAAiB,CAAC,CAAC;QAE9D,qFAAqF;QACrF,eAAe,CAAC,SAAS,GAAG,SAAS,CAAC;QAEtC,0FAA0F;QAC1F,4FAA4F;QAC5F,sCAAsC;QACtC,IAAI,cAAc,GAAG,IAAI,cAAc,CAAC,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;QAEnE,IAAI,aAAa,GAAG,IAAI,eAAe,CAAC,SAAS,EAAE,IAAI,EAAE,cAAc,CAAC,CAAC;QAEzE,IAAI,UAAU,GAAG,eAAe,CAAC,qBAAqB,CAAC,aAAa,CAAC,CAAC;QACtE,SAAS,CAAC,iBAAiB,GAAG,UAAU,CAAC,QAAQ,CAAC;QAElD,MAAM,CAAC,SAAS,CAAC;IACnB,CAAC;IAED;;;;OAIG;IACK,mCAAgB,GAAxB,UAAyB,YAA4B;QACnD,IAAI,KAAK,GAAG,IAAI,YAAY,EAAE,CAAC;QAE/B,KAAK,CAAC,WAAW,GAAG,IAAI,CAAC;QACzB,KAAK,CAAC,gBAAgB,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE;aAC5C,MAAM,EAAE;aACR,kBAAkB,EAAE;aACpB,gBAAgB,EAAE,CAAC;QAExB,MAAM,CAAC,KAAK,CAAC;IACf,CAAC;IA1FH;QAAC,UAAU,EAAE;;gBAAA;IA2Fb,eAAC;AAAD,CA1FA,AA0FC,IAAA;AASD;IAAA;IAOA,CAAC;IANQ,sBAAO,GAAd;QACE,MAAM,CAAC;YACL,QAAQ,EAAE,cAAc;YACxB,SAAS,EAAE,CAAC,QAAQ,EAAE,iBAAiB,EAAE,UAAU,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC;SACzE,CAAC;IACJ,CAAC;IAZH;QAAC,QAAQ,CAAC;YACR,OAAO,EAAE,CAAC,aAAa,EAAE,YAAY,EAAE,UAAU,CAAC;YAClD,OAAO,EAAE,CAAC,iBAAiB,CAAC;YAC5B,YAAY,EAAE,CAAC,iBAAiB,CAAC;YACjC,eAAe,EAAE,CAAC,iBAAiB,CAAC;SACrC,CAAC;;sBAAA;IAQF,qBAAC;AAAD,CAPA,AAOC,IAAA","file":"dialog/dialog.js","sourcesContent":["import {NgModule, ModuleWithProviders, Injector, ComponentRef, Injectable} from '@angular/core';\r\nimport {\r\n  Overlay,\r\n  OverlayModule,\r\n  PortalModule,\r\n  OverlayRef,\r\n  OverlayState,\r\n  ComponentPortal,\r\n  OVERLAY_PROVIDERS,\r\n} from '../core';\r\nimport {ComponentType} from '../core';\r\nimport {MdDialogConfig} from './dialog-config';\r\nimport {MdDialogRef} from './dialog-ref';\r\nimport {DialogInjector} from './dialog-injector';\r\nimport {MdDialogContainer} from './dialog-container';\r\nimport {A11yModule} from '../core/a11y/index';\r\n\r\nexport {MdDialogConfig} from './dialog-config';\r\nexport {MdDialogRef} from './dialog-ref';\r\n\r\n\r\n// TODO(jelbourn): add support for opening with a TemplateRef\r\n// TODO(jelbourn): add `closeAll` method\r\n// TODO(jelbourn): default dialog config\r\n// TODO(jelbourn): escape key closes dialog\r\n// TODO(jelbourn): dialog content directives (e.g., md-dialog-header)\r\n// TODO(jelbourn): animations\r\n\r\n\r\n\r\n/**\r\n * Service to open Material Design modal dialogs.\r\n */\r\n@Injectable()\r\nexport class MdDialog {\r\n  constructor(private _overlay: Overlay, private _injector: Injector) { }\r\n\r\n  /**\r\n   * Opens a modal dialog containing the given component.\r\n   * @param component Type of the component to load into the load.\r\n   * @param config\r\n   */\r\n  open<T>(component: ComponentType<T>, config: MdDialogConfig): MdDialogRef<T> {\r\n    let overlayRef = this._createOverlay(config);\r\n    let dialogContainer = this._attachDialogContainer(overlayRef, config);\r\n\r\n    return this._attachDialogContent(component, dialogContainer, overlayRef);\r\n  }\r\n\r\n  /**\r\n   * Creates the overlay into which the dialog will be loaded.\r\n   * @param dialogConfig The dialog configuration.\r\n   * @returns A promise resolving to the OverlayRef for the created overlay.\r\n   */\r\n  private _createOverlay(dialogConfig: MdDialogConfig): OverlayRef {\r\n    let overlayState = this._getOverlayState(dialogConfig);\r\n    return this._overlay.create(overlayState);\r\n  }\r\n\r\n  /**\r\n   * Attaches an MdDialogContainer to a dialog's already-created overlay.\r\n   * @param overlay Reference to the dialog's underlying overlay.\r\n   * @param config The dialog configuration.\r\n   * @returns A promise resolving to a ComponentRef for the attached container.\r\n   */\r\n  private _attachDialogContainer(overlay: OverlayRef, config: MdDialogConfig): MdDialogContainer {\r\n    let containerPortal = new ComponentPortal(MdDialogContainer, config.viewContainerRef);\r\n\r\n    let containerRef: ComponentRef<MdDialogContainer> = overlay.attach(containerPortal);\r\n    containerRef.instance.dialogConfig = config;\r\n\r\n    return containerRef.instance;\r\n  }\r\n\r\n  /**\r\n   * Attaches the user-provided component to the already-created MdDialogContainer.\r\n   * @param component The type of component being loaded into the dialog.\r\n   * @param dialogContainer Reference to the wrapping MdDialogContainer.\r\n   * @param overlayRef Reference to the overlay in which the dialog resides.\r\n   * @returns A promise resolving to the MdDialogRef that should be returned to the user.\r\n   */\r\n  private _attachDialogContent<T>(\r\n      component: ComponentType<T>,\r\n      dialogContainer: MdDialogContainer,\r\n      overlayRef: OverlayRef): MdDialogRef<T> {\r\n    // Create a reference to the dialog we're creating in order to give the user a handle\r\n    // to modify and close it.\r\n    let dialogRef = <MdDialogRef<T>> new MdDialogRef(overlayRef);\r\n\r\n    // When the dialog backdrop is clicked, we want to close it.\r\n    overlayRef.backdropClick().subscribe(() => dialogRef.close());\r\n\r\n    // Set the dialogRef to the container so that it can use the ref to close the dialog.\r\n    dialogContainer.dialogRef = dialogRef;\r\n\r\n    // We create an injector specifically for the component we're instantiating so that it can\r\n    // inject the MdDialogRef. This allows a component loaded inside of a dialog to close itself\r\n    // and, optionally, to return a value.\r\n    let dialogInjector = new DialogInjector(dialogRef, this._injector);\r\n\r\n    let contentPortal = new ComponentPortal(component, null, dialogInjector);\r\n\r\n    let contentRef = dialogContainer.attachComponentPortal(contentPortal);\r\n    dialogRef.componentInstance = contentRef.instance;\r\n\r\n    return dialogRef;\r\n  }\r\n\r\n  /**\r\n   * Creates an overlay state from a dialog config.\r\n   * @param dialogConfig The dialog configuration.\r\n   * @returns The overlay configuration.\r\n   */\r\n  private _getOverlayState(dialogConfig: MdDialogConfig): OverlayState {\r\n    let state = new OverlayState();\r\n\r\n    state.hasBackdrop = true;\r\n    state.positionStrategy = this._overlay.position()\r\n        .global()\r\n        .centerHorizontally()\r\n        .centerVertically();\r\n\r\n    return state;\r\n  }\r\n}\r\n\r\n\r\n@NgModule({\r\n  imports: [OverlayModule, PortalModule, A11yModule],\r\n  exports: [MdDialogContainer],\r\n  declarations: [MdDialogContainer],\r\n  entryComponents: [MdDialogContainer],\r\n})\r\nexport class MdDialogModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: MdDialogModule,\r\n      providers: [MdDialog, OVERLAY_PROVIDERS, A11yModule.forRoot().providers],\r\n    };\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}